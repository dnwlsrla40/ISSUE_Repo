# Key prop 설정

리액트 혹은 vue 등에서 배열을 렌더링 할 때에는 key를 설정해 주어야 한다. 설정하지 않아도 에러는 발생하지 않지만 다음과 같은 경고가 console창에 등장한다.

![key prop error](../images/React/key_prop_error.PNG)

이러한 에러는 왜 발생하는 것일까?

그 이유는 배열을 렌더링 할 때 각 고유 원소에 `key`가 있어야만 효율적으로 렌더링 될 수 있기 때문이다.

## Key의 존재유무에 따른 업데이트 방식

예를 들어서 다음과 같은 배열이 있다고 하자.

```
const array = ['a', 'b', 'c', 'd'];
```

그리고 위 배열을 다음과 같이 렌더링 한다고 가정하자.

```
array.map(item => <div>{item}</div>);
```

이후 위 배열의 b와 c 사이에 z를 삽입하게 된다면, 리렌더링을 할 때 `<div>b</div>`와 `<div>c</div>`사이에 새로운 div 태그인 `<div>z</div>`를 삽입하는 것이 아니라 기존의 c가 z로 바뀌고, d가 c로 바뀌고 맨 마지막에 d가 새로 삽입이 된다.

a를 삭제하는 것 역시 기존의 a가 b로 바뀌고 b->c, c->d로 바뀌고, 맨 마지막에 있는 d가 제거된다.

이처럼 key가 없는 경우는 매우 비효율적인 작업을 하게 된다. 만약 key가 있다면 어떻게 될까?

아래 처럼 객체에 `key`로 사용 할 수 있는 고유 값이 있고 렌더링이 된다면

```
[
  {
    id: 0,
    text: 'a'
  },
  {
    id: 1,
    text: 'b'
  },
  {
    id: 2,
    text: 'c'
  },
  {
    id: 3,
    text: 'd'
  }
];

array.map(item => <div key={item.id}>{item.text}</div>);
```

배열이 업데이트 될 때 `key`가 없을 때처럼 비효율적으로 업데이트 하는 것이 아니라, 수정되지 않는 기존의 값은 그대로 두고 원하는 곳에 내용을 삽입하거나 삭제한다.

똑같이 b와 c 사이에 z를 넣게 된다면 이번엔 `<div>b</div>`와 `<div>c</div>`사이인 id 1과 2 사이에 id 4를 가진 `<div>z</div>`가 삽입되게 된다.